<% show_form = !commentable.respond_to?(:commentable_by?) || commentable.commentable_by?(current_user) %>
<section class="comments">
  <% if comments.any? %>
      <h2><%= t(:comments_list) %></h2>

      <% comments.recent.each do |comment| %>
          <%= render comment %>
      <% end %>
  <% end %>

  <% if show_form %>
      <section class="reply-container">
        <h3><%= t(:add_comment) %></h3>

        <div class="container">
          <%= render partial: 'comments/reply_form', locals: { entity: Comment.new(commentable: commentable) } %>
        </div>
      </section>
  <% end %>
</section>
