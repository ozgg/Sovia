<fieldset>
  <legend><%= t('posts.form.figures') %></legend>

  <ul class="list-of-figures">
    <% entity.figures.each do |figure| %>
        <li>
          <div class="image">
            <%= link_to image_tag(figure.image.preview.url), figure unless figure.image.blank? %>
          </div>
          <div>
            <div class="slug"><%= link_to figure.slug, figure %></div>
            <div class="caption">
              <%= figure.caption %>
              <% unless figure.alt_text.blank? %>
                  (<%= figure.alt_text %>)
              <% end %>
            </div>
          </div>
        </li>
    <% end %>
    <li>
      <div id="new-figure-0" class="image">
        <%= image_tag 'image-placeholder.png', alt: t('activerecord.attributes.figure.image') %>
      </div>
      <div>
        <div>
          <%= label_tag 'figures[0][image]', t('activerecord.attributes.figure.image') %>
          <%= file_field_tag 'figures[0][image]', accept: 'image/jpeg,image/png', data: { image: 'new-figure-0' } %>
        </div>
        <div>
          <%= label_tag 'figures[0][slug]', t('activerecord.attributes.figure.slug') %>
          <%= text_field_tag 'figures[0][slug]', Figure.next_slug(entity), size: 30, maxlength: 30 %>
        </div>
        <div>
          <%= label_tag 'figures[0][caption]', t('activerecord.attributes.figure.caption') %>
          <%= text_field_tag 'figures[0][caption]', '', size: 50 %>
        </div>
        <div>
          <%= label_tag 'figures[0][alt_text]', t('activerecord.attributes.figure.alt_text') %>
          <%= text_field_tag 'figures[0][alt_text]', '', size: 50 %>
        </div>
      </div>
    </li>
  </ul>
  <button type="button" id="add-figure"><%= t('posts.form.add_figure') %></button>
</fieldset>
