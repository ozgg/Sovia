<% content_for :meta_title, t('.title') %>
<%= render 'shared/metrics' %>


<article class="profile">
  <header>
    <h1><%= t('.title') %></h1>
    <% if current_user.sovia? %>
        <nav class="options">
          <ul>
            <li><%= link_to t(:edit), edit_my_profile_path %></li>
          </ul>
        </nav>
    <% end %>
  </header>

  <section>
    <% if current_user.sovia? %>
        <h1><%= current_user.login %></h1>
    <% else %>
        <h1><%= current_user.name %></h1>
    <% end %>
    <figure>
      <%= profile_avatar(current_user) %>
      <figcaption><%= t('.avatar') %></figcaption>
    </figure>
    <dl>
      <dt><%= t('.created_at') %></dt>
      <dd><%= current_user.created_at %></dd>
      <% if current_user.filled_email? %>
          <dt><%= t('activerecord.attributes.user.email') %></dt>
          <dd>
            <%= current_user.email %>
            <% if current_user.allow_mail %>
                <div class="flag"><%= t('activerecord.attributes.user.allow_mail') %></div>
            <% end %>
            <% if current_user.mail_confirmed? %>
                <div class="flag"><%= t('user.email_confirmed') %></div>
            <% else %>
                <%= form_tag my_confirmation_path, method: :post do %>
                    <%= button_tag t('.send_code'), type: :submit %>
                <% end %>
            <% end %>
          </dd>
      <% end %>
      <dt><%= t('.statistics') %></dt>
      <dd>
        <ul>
          <li><%= t('.entries_count') %>: <%= current_user.entries_count %></li>
          <li><%= t('.comments_count') %>: <%= current_user.comments_count %></li>
        </ul>
      </dd>
      <dt><%= t('.languages') %></dt>
      <dd>
        <ul>
          <% current_user.language_names.each do |language_name| %>
              <li><%= language_name %></li>
          <% end %>
        </ul>
      </dd>
    </dl>
  </section>
</article>

