<% if collection.any? %>
    <ul class="list-of-entities">
      <% collection.each do |pattern| %>
          <% if pattern.deleted? %>
              <li><%= t(:deleted_entity) %> id: <%= pattern.id %></li>
          <% else %>
              <li><%= render partial: 'admin/patterns/entity/in_list', locals: { pattern: pattern } %></li>
          <% end %>
      <% end %>
    </ul>
<% else %>
    <%= render 'shared/nothing_found' %>
<% end %>

<script>/*<![CDATA[*/
$(function () {
    $('form.pattern-updater').on('submit', function () {
        var $form   = $(this);
        var $button = $(this).find('button');

        if (!$button.hasClass('hidden')) {
            $button.addClass('hidden');
            $.ajax($form.attr('action'), {
                method: 'patch',
                data: $form.serialize(),
                success: function(response) {
                    if (response.hasOwnProperty('data')) {
                        console.log(response['data']);
                        $button.removeClass('hidden');
                    }
                }
            }).fail(handle_ajax_failure);
        }

        return false;
    });
});
/*]]>*/</script>
