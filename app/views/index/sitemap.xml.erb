<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc><%= root_url %></loc>
  </url>
  <url>
    <loc><%= about_url %></loc>
  </url>
  <url>
    <loc><%= tos_url %></loc>
  </url>
  <url>
    <loc><%= privacy_url %></loc>
  </url>
  <url>
    <loc><%= contact_url %></loc>
  </url>
  <%
    prefix = "#{request.protocol}#{request.host}"
    time_format = '%Y-%m-%dT%H:%M:%S%:z'
  %>
  <% Post.list_for_visitors.each do |entity| %>
    <url>
      <loc><%= "#{prefix}#{entity.url}" %></loc>
      <lastmod><%= entity.updated_at.strftime(time_format) %></lastmod>
    </url>
  <% end %>

  <% Dream.list_for_visitors(nil).each do |entity| %>
    <url>
      <loc><%= "#{prefix}#{entity.url}" %></loc>
      <lastmod><%= entity.updated_at.strftime(time_format) %></lastmod>
    </url>
  <% end %>

  <% Pattern.list_for_visitors.each do |entity| %>
    <url>
      <loc><%= dreambook_word_url(word: entity.name) %></loc>
      <lastmod><%= entity.updated_at.strftime(time_format) %></lastmod>
    </url>
  <% end %>
</urlset>
